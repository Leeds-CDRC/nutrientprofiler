<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="nutrientprofiler">
<title>Nutrient Profile Model Assessment • nutrientprofiler</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Nutrient Profile Model Assessment">
<meta property="og:description" content="nutrientprofiler">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nutrientprofiler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/nutrientprofiler.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/nutrientprofile_assessment.html">Nutrient Profile Model Assessment</a>
    <a class="dropdown-item" href="../articles/nutrientprofile_scoring.html">Nutrient Profile Model Scoring</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Leeds-CDRC/nutrientprofiler/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Nutrient Profile Model Assessment</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Leeds-CDRC/nutrientprofiler/blob/HEAD/vignettes/nutrientprofile_assessment.Rmd" class="external-link"><code>vignettes/nutrientprofile_assessment.Rmd</code></a></small>
      <div class="d-none name"><code>nutrientprofile_assessment.Rmd</code></div>
    </div>

    
    
<p>For assessing individual nutrient scores of a product within the
Nutrient Profile Model we have to complete the following steps:</p>
<ul>
<li>Calculate compound A and C scores</li>
<li>Calculate a total Nutrient Profile Model score using A and C scores
taking into account Fibre and fruit, vegetables and nut scores</li>
<li>Determine whether the product passes or fails with thresholds
depending on whether the product is a food or drink</li>
</ul>
<p>The <code>nutrientprofiler</code> package includes a high level
wrapper function <code>NPMAssess</code> for handling this row-by-row on
a data.frame with columns generated from <code>NPMScore</code>. Below we
will explore the component functions of <code>NPMAssess</code> to
understand how this function operates.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://leeds-cdrc.github.io/nutrientprofiler/">nutrientprofiler</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="a-and-c-score-calculators">A and C score calculators<a class="anchor" aria-label="anchor" href="#a-and-c-score-calculators"></a>
</h2>
<p>The first component of <code>NPMAssess</code> is the step to
calculate the A and C scores. This involves two functions:
<code>A_scorer</code> and <code>C_scorer</code> that accept a number of
arguments corresponding to the appropriate nutrient score and sum
them.</p>
<p>The <code>A_scorer</code> takes 4 arguments:
<code>energy_score</code>, <code>sugar_score</code>,
<code>salt_score</code> and <code>fat_score</code>. These are scores
calculated in the previous <code>NPMScore</code> step and are summed in
the <code>A_scorer</code> function to return a compound A score. The
<code>C_scorer</code> takes 3 arguments: <code>fvn_score</code> (fruit,
vegetable and nut score), <code>protein_score</code> and
<code>fibre_score</code> and calculates the sum of these to return a C
score.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/A_scorer.html">A_scorer</a></span><span class="op">(</span>energy_score <span class="op">=</span> <span class="fl">3</span>, sugar_score <span class="op">=</span> <span class="fl">5</span>, salt_score <span class="op">=</span> <span class="fl">1</span>, fat_score <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 11</span></span>
<span></span>
<span><span class="fu"><a href="../reference/C_scorer.html">C_scorer</a></span><span class="op">(</span>fvn_score <span class="op">=</span> <span class="fl">2</span>, protein_score <span class="op">=</span> <span class="fl">3</span>, fibre_score <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="nutrient-profile-model-score">Nutrient Profile Model Score<a class="anchor" aria-label="anchor" href="#nutrient-profile-model-score"></a>
</h2>
<p>After computing the A and C scores we’re able to calculate the
overall Nutrient Profile Model Score of the product. The method for
computing the score is conditional on the size of the A and C score and
can in some circumstances take into account the fibre score and the
fruit, vegetables and nut score. Therefore the <code>NPM_total</code>
function takes 4 arguments: <code>a_score</code>, <code>c_score</code>,
<code>fvn_score</code>, <code>fibre_score</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/NPM_total.html">NPM_total</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example using keyword arguments</span></span>
<span><span class="fu"><a href="../reference/NPM_total.html">NPM_total</a></span><span class="op">(</span>a_score <span class="op">=</span> <span class="fl">10</span>, c_score <span class="op">=</span> <span class="fl">4</span>, fvn_score <span class="op">=</span> <span class="fl">1</span>, fibre_score <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>This function works by subtracting the C score from the A score.
However, if the A score is greater than or equal to 11 and the fruit,
vegetable and nut score is less than 5, the function performs a
different calculation and substracts the sum of the fibre score and the
fruit, vegetables and nut score from the A score. This follows the logic
defined in the <a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/216094/dh_123492.pdf" class="external-link">Technical
Guidance for Nutrient Profile modelling</a>.</p>
</div>
<div class="section level2">
<h2 id="nutrient-profile-model-assessment">Nutrient Profile Model Assessment<a class="anchor" aria-label="anchor" href="#nutrient-profile-model-assessment"></a>
</h2>
<p>After determining an overall score for the product within the
Nutrient Profile Model the final step is to assess this score to
determine if the product passes or fails. This is a simple test of
whether the score is above or below a specific threshold where the
threshold differs if the product is a food or drink.</p>
<p>If the product is a food an NPM score of 4 or more leads to a
failure, whilst for a drink a product fails the NPM is it scores 1 or
more.</p>
<p><code>NPM_assess</code> works by accepting two arguments:
<code>NPM_score</code> and <code>type</code>. <code>type</code>
determines if the product is a food or drink by accepting either
<code>food</code> or <code>drink</code> whilst <code>NPM_score</code>
should be a numeric value calculated from the prior
<code>NPM_total</code> step. The function returns a character vector
with a single value of either <code>"PASS"</code> or
<code>"FAIL"</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># pass</span></span>
<span><span class="fu"><a href="../reference/NPM_assess.html">NPM_assess</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">"food"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "PASS"</span></span>
<span></span>
<span><span class="co"># fail</span></span>
<span><span class="fu"><a href="../reference/NPM_assess.html">NPM_assess</a></span><span class="op">(</span><span class="fl">6</span>, type <span class="op">=</span> <span class="st">"drink"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "FAIL"</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Alex Coleman, Vicki Jenneson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
